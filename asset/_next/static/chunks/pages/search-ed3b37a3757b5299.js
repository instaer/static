(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603,44],{813:function(e,t,r){"use strict";var o=r(4836);t.Z=void 0;var i=o(r(4938)),n=r(5893),a=(0,i.default)((0,n.jsx)("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");t.Z=a},8850:function(e,t,r){"use strict";var o=r(3366),i=r(7462),n=r(7294),a=r(512),s=r(4780),l=r(2905),c=r(8216),d=r(1657),h=r(7224),u=r(948),x=r(5893);let g=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],useUtilityClasses=e=>{let{color:t,variant:r,classes:o,size:n}=e,a={root:["root",r,`size${(0,c.Z)(n)}`,"inherit"===t?"colorInherit":t]},l=(0,s.Z)(a,h.N,o);return(0,i.Z)({},o,l)},m=(0,u.ZP)(l.Z,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,u.FO)(e)||"classes"===e,overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.variant],t[`size${(0,c.Z)(r.size)}`],"inherit"===r.color&&t.colorInherit,t[(0,c.Z)(r.size)],t[r.color]]}})(({theme:e,ownerState:t})=>{var r,o;return(0,i.Z)({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:null==(r=(o=e.palette).getContrastText)?void 0:r.call(o,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${h.Z.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},"small"===t.size&&{width:40,height:40},"medium"===t.size&&{width:48,height:48},"extended"===t.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===t.variant&&"small"===t.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===t.variant&&"medium"===t.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===t.color&&{color:"inherit"})},({theme:e,ownerState:t})=>(0,i.Z)({},"inherit"!==t.color&&"default"!==t.color&&null!=(e.vars||e).palette[t.color]&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}}),({theme:e})=>({[`&.${h.Z.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}})),p=n.forwardRef(function(e,t){let r=(0,d.Z)({props:e,name:"MuiFab"}),{children:n,className:s,color:l="default",component:c="button",disabled:h=!1,disableFocusRipple:u=!1,focusVisibleClassName:p,size:f="large",variant:b="circular"}=r,v=(0,o.Z)(r,g),Z=(0,i.Z)({},r,{color:l,component:c,disabled:h,disableFocusRipple:u,size:f,variant:b}),y=useUtilityClasses(Z);return(0,x.jsx)(m,(0,i.Z)({className:(0,a.Z)(y.root,s),component:c,disabled:h,focusRipple:!u,focusVisibleClassName:(0,a.Z)(y.focusVisible,p),ownerState:Z,ref:t},v,{classes:y,children:n}))});t.Z=p},7224:function(e,t,r){"use strict";r.d(t,{N:function(){return getFabUtilityClass}});var o=r(1588),i=r(4867);function getFabUtilityClass(e){return(0,i.Z)("MuiFab",e)}let n=(0,o.Z)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);t.Z=n},8298:function(e,t,r){"use strict";r.d(t,{Z:function(){return useScrollTrigger}});var o=r(7462),i=r(3366),n=r(7294);let a=["getTrigger","target"];function defaultTrigger(e,t){let{disableHysteresis:r=!1,threshold:o=100,target:i}=t,n=e.current;return i&&(e.current=void 0!==i.pageYOffset?i.pageYOffset:i.scrollTop),(!!r||void 0===n||!(e.current<n))&&e.current>o}let s="undefined"!=typeof window?window:null;function useScrollTrigger(e={}){let{getTrigger:t=defaultTrigger,target:r=s}=e,l=(0,i.Z)(e,a),c=n.useRef(),[d,h]=n.useState(()=>t(c,l));return n.useEffect(()=>{let handleScroll=()=>{h(t(c,(0,o.Z)({target:r},l)))};return handleScroll(),r.addEventListener("scroll",handleScroll,{passive:!0}),()=>{r.removeEventListener("scroll",handleScroll,{passive:!0})}},[r,t,JSON.stringify(l)]),d}},2774:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return r(1832)}])},1370:function(e,t,r){"use strict";var o=r(5893);r(7294);var i=r(3972),n=r(2623),a=r(1623),s=r(8492),l=r(4781),c=r(2734),d=r(5675),h=r.n(d),u=r(3379);t.Z=function(e){let t=(0,c.Z)(),{item:r}=e,d="/article/".concat(r.urlName),x=r.title.length>60?"".concat(r.title.slice(0,57),"..."):r.title,g=r.summary.length>140?"".concat(r.summary.slice(0,137),"..."):r.summary;return(0,o.jsx)(a.Z,{component:"a",href:d,sx:{mb:4},children:(0,o.jsxs)(n.Z,{sx:{display:"flex"},children:[(0,o.jsxs)(s.Z,{sx:{flex:1,height:{xs:"auto",sm:"auto"}},children:[(0,o.jsx)(i.Z,{component:"h2",marginBottom:t.spacing(2),fontWeight:"bold",sx:{fontSize:t.typography.h6.fontSize,[t.breakpoints.down("sm")]:{fontSize:"1.2rem",marginBottom:t.spacing(0)}},children:x}),(0,o.jsx)(i.Z,{color:"text.secondary",marginBottom:t.spacing(2),sx:{fontSize:"0.9rem",[t.breakpoints.down("sm")]:{display:"none"},[t.breakpoints.up("sm")]:{fontSize:"0.9rem"},[t.breakpoints.up("md")]:{fontSize:"1.1rem"}},children:g}),(0,o.jsxs)(i.Z,{marginBottom:t.spacing(1),sx:{display:"flex",alignItems:"center",color:"text.secondary",textDecoration:"underline",[t.breakpoints.down("sm")]:{display:"none"}},children:["Continue reading",(0,o.jsx)(u.Z,{fontSize:"inherit",color:"text.secondary"})]})]}),(0,o.jsx)(l.Z,{sx:{position:"relative",pt:"1rem",pb:"0.5rem",pr:"0.5rem",width:{xs:120,sm:160},height:{xs:160,sm:213},display:{xs:"block",sm:"block"}},children:(0,o.jsx)(h(),{src:r.coverImageUrl,alt:r.title,width:160,height:213,style:{objectFit:"cover",maxWidth:"100%",maxHeight:"100%"}})})]})})}},9044:function(e,t,r){"use strict";r.r(t);var o=r(5893);r(7294);var i=r(7357),n=r(5582),a=r(3972),s=r(7786),l=r(2734),c=r(8298),d=r(6628),h=r(8850),u=r(813),x=r(4080);let g={links:[{title:"Privacy",url:"/privacy"},{title:"Terms",url:"/terms"},{title:"Contact",url:"mailto:"+x.e.email}]};function ScrollTop(e){let{children:t}=e,r=(0,c.Z)({disableHysteresis:!0,threshold:100});return(0,o.jsx)(d.Z,{in:r,timeout:500,children:(0,o.jsx)(i.Z,{onClick:e=>{let t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");if(t){let e={block:"center",behavior:"smooth"};setTimeout(()=>{t.scrollIntoView(e)},150)}},role:"presentation",sx:{position:"fixed",bottom:16,right:16},children:t})})}function Copyright(){return(0,o.jsxs)(a.Z,{variant:"subtitle2",align:"center",color:"#202124",gutterBottom:!0,children:["Copyright \xa9 ",(0,o.jsx)(s.Z,{color:"inherit",href:x.e.url,underline:"hover",children:x.e.title})," ",new Date().getFullYear(),"."]})}t.default=function(e){let t=(0,l.Z)(),{links:r}=g;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ScrollTop,{...e,children:(0,o.jsx)(h.Z,{size:"small","aria-label":"scroll back to top",sx:{bgcolor:"#FF9966","&:hover":{bgcolor:"#FF8533",boxShadow:e=>e.shadows[8]},"&:active":{bgcolor:"#FF8533",boxShadow:e=>e.shadows[12]}},children:(0,o.jsx)(u.Z,{})})}),(0,o.jsx)(i.Z,{component:"footer",sx:{bgcolor:"#f2f2f2",pt:2,pb:1},children:(0,o.jsxs)(n.Z,{maxWidth:"lg",children:[(0,o.jsx)(Copyright,{}),(0,o.jsx)(a.Z,{variant:"subtitle2",align:"center",component:"p",sx:{display:"flex",justifyContent:"center",gap:t.spacing(1)},children:r.map(e=>(0,o.jsx)(s.Z,{href:e.url,underline:"hover",color:"#202124",children:e.title},e.title))})]})})]})}},1832:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return SearchPage}});var o=r(5893),i=r(7294),n=r(8263),a=r(5582),s=r(2734),l=r(3454),c=r(1370),d=r(9044),h=r(3508),u=r(3972),x=r(1163),g=r(9880),m=r(7285),p=r(1812),f=r(5889),b=r(6489),v=r(4080),Z=r(9008),y=r.n(Z);let j={min:2,max:64},fetchSearchByKeyword=async(e,t)=>{let{result:r,error:o}=await (0,m.D2)("api/travel-journals/search/keyword",(0,m.D4)({keyword:e,cursor:t}));return o?[]:null==r?void 0:r.body};function SearchPage(){let e=(0,s.Z)(),t=(0,x.useRouter)(),{k:r}=t.query,[m,Z]=i.useState(!1),[w,S]=i.useState((0,o.jsx)(o.Fragment,{})),[k,z]=i.useState([]),[C,F]=i.useState(!0),[N,R]=i.useState({loading:!1,disabled:0===k.length});i.useEffect(()=>{if(void 0!==r&&(!(0,g.Ej)(r,j.min,j.max)||(0,g.FU)(r))&&(F(!1),t.replace("/404"),Z(!0)),r){S((0,o.jsxs)(o.Fragment,{children:["Search Results for: ",(0,o.jsx)("span",{style:{textDecoration:"underline"},children:r})]}));let fetchSearchResult=async()=>{let e=await fetchSearchByKeyword(r);F(!1),e.length>0&&z(e)};fetchSearchResult()}},[r]);let handleLoadMore=async()=>{let e=k[k.length-1].cursor;R({loading:!0,disabled:!0});let t=await fetchSearchByKeyword(r,e);R({loading:!1,disabled:0===t.length}),t.length>0&&z([...k,...t])};return m?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(y(),{children:["/*禁止搜索引擎收录*/",(0,o.jsx)("meta",{name:"robots",content:"noindex"}),r&&(0,o.jsx)("title",{children:"".concat(r," | ").concat(v.e.title)})]}),(0,o.jsxs)(a.Z,{maxWidth:"lg",children:[(0,o.jsx)("div",{id:"back-to-top-anchor"}),(0,o.jsx)(l.Z,{}),(0,o.jsx)("main",{children:(0,o.jsxs)(n.ZP,{container:!0,spacing:4,children:[(0,o.jsx)(n.ZP,{item:!0,xs:12,md:8,mt:2,mb:-2,children:(0,o.jsx)(u.Z,{variant:"h6",component:"h1",fontWeight:"bold",color:"textSecondary",children:w})}),(0,o.jsxs)(n.ZP,{item:!0,xs:12,md:8,children:[(0,o.jsx)(f.Z,{open:C,invisible:!0,sx:{zIndex:e=>e.zIndex.drawer+1},children:(0,o.jsx)(b.Z,{variant:"indeterminate",disableShrink:!1,sx:{color:e=>"light"===e.palette.mode?"#1a90ff":"#308fe8"},size:64,thickness:4})}),(0,o.jsx)(()=>C?(0,o.jsx)(u.Z,{variant:"h4",component:"h3",fontWeight:"bold",color:"textSecondary",children:"Loading..."}):0===k.length?(0,o.jsx)(u.Z,{variant:"h4",component:"h3",fontWeight:"bold",color:"textSecondary",children:"No results"}):k.map(e=>(0,o.jsx)(c.Z,{item:e},e.title)),{}),(0,o.jsx)(n.ZP,{container:!0,justifyContent:"center",sx:{mb:e.spacing(4)},children:!C&&k.length>0&&(0,o.jsx)(p.Z,{variant:"outlined",startIcon:(0,o.jsx)(h.Z,{}),loadingPosition:"start",loading:N.loading,disabled:N.disabled,onClick:()=>handleLoadMore(),sx:{color:"grey.700",borderColor:"grey.700"},children:"Load More"})})]})]})})]}),(0,o.jsx)(d.default,{})]})}}},function(e){e.O(0,[672,716,253,546,774,888,179],function(){return e(e.s=2774)}),_N_E=e.O()}]);